<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit User</title>
</head>

<body>
    <h1>Edit User</h1>
    <form action="/admin/<%= user._id %>/edit" method="POST">
        <label for="affiliate_id">Affiliate ID:</label>
        <input type="text" id="affiliate_id" name="affiliate_id" value="<%= user.affiliate_id %>" readonly><br>
        <label for="balance">Balance:</label>
        <input type="number" id="balance" name="balance" value="<%= user.balance %>"><br>
        <label for="balance_affiliate">Affiliate Balance:</label>
        <input type="number" id="balance_affiliate" name="balance_affiliate"
            value="<%= user.balance_affiliate %>"><br>
        <label for="user_id">User ID:</label>
        <input type="text" id="user_id" name="user_id" value="<%= user.user_id %>" readonly><br>
        <button type="submit">Save Changes</button>
    </form>

    <h2>Withdrawal History</h2>
    <% if (user.withdrawal_history.length > 0) { %>
        <ul>
            <% user.withdrawal_history.slice(0, 30).forEach(entry => { %>
                <li>
                    <p>Status: <%= entry.status %></p>
                    <p>Amount: <%= entry.amount %></p>
                    <p>Source: <%= entry.source %></p>
                    <p>Created At: <%= new Date(entry.createdAt).toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' }) %></p>
                </li>
            <% }) %>
        </ul>
    <% } else { %>
        <p>No withdrawal history available</p>
    <% } %>
</body>

</html>
